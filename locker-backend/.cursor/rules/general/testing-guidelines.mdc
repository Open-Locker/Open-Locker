---
description: Open-Locker backend testing deltas
alwaysApply: false
---
# Testing Deltas (Beyond Boost)

Boost already defines baseline Laravel and PHPUnit behavior. Keep this rule
focused on Open-Locker specifics.

## Domain-Critical Scenarios

- Prioritize end-to-end coverage for borrow/return item workflows.
- Test both business outcome and persistence state, especially active loan
  constraints (`returned_at` is `null` for open loans).
- Include authorization checks for user vs. admin-only endpoints.

## Hardware Boundary

- Mock hardware-facing services (for example `LockerService`) in feature tests.
- Verify API behavior and side effects without requiring live Modbus hardware.

## Practical Scope

- Default to feature tests; only add unit tests for isolated pure logic.
